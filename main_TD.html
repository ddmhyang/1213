<!DOCTYPE html>
<html>
    <head>
        <style>
            @font-face {
                font-family: 'SBAggroB';
                src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_2108@1.1/SBAggroB.woff') format('woff');
            }
            @font-face {
                font-family: 'S-CoreDream-3Light';
                src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_six@1.2/S-CoreDream-3Light.woff') format('woff');
           }

            html, body {
                margin: 0;
                padding: 0;
                height: 100%;
                border-radius: 40px;
                background: linear-gradient(0deg, rgba(234, 222, 214, 0.50) 0%, rgba(234, 222, 214, 0.50) 100%), url("img/background.png") lightgray 50% / cover no-repeat;
                background-blend-mode: overlay, lighten, normal;                
                display: flex;
                overflow: hidden;
                justify-content: center;
                align-items: center;
            }

            .container {
                width: 2560px;
                height: 1600px;
                transform-origin: center center;
                transition: width 0.2s, height 0.2s;
                position: relative;
                overflow: hidden;
            }

            html, body, .container {
                transition: background-color 1s ease-in-out;
            }
        
            
            #index_box {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                z-index: 1000;
                width: 672px;
                height: 1261px;
                flex-shrink: 0;
                border-radius: 50px;
                background: #000;
                border-radius: 50px;
                background: #000;
                box-shadow: 4px 4px 0px 0px rgba(0, 0, 0, 0.49);
            }

            #background_window{
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                width: 634.667px;
                height: 1228.77px;
                flex-shrink: 0;
                border-radius: 40px;
                background: linear-gradient(0deg, rgba(234, 222, 214, 0.50) 0%, rgba(234, 222, 214, 0.50) 100%), url("img/background.png") lightgray 50% / cover no-repeat;
                z-index: 2000;
                transition: opacity 1s ease-in-out;
                opacity: 1;
            }

            #background_img_NY {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                width: 634.667px;
                height: 1228.77px;
                flex-shrink: 0;
                border-radius: 40px;
                z-index: 2000;
                transition: opacity 1s ease-in-out; /* 부드러운 변화 */
                opacity: 0; /* 기본적으로 숨김 */
                border-radius: 40px;
                background: linear-gradient(0deg, rgba(219, 227, 254, 0.50) 0%, rgba(219, 227, 254, 0.50) 100%), url("img/icon_XM.png") lightgray 50% / cover no-repeat;
            }

            #top_bar{
                position: absolute;
                top: 13.09px;
                left: 50%;
                transform: translateX(-50%);
                width: 326.667px;
                height: 55.395px;
                flex-shrink: 0;
                border-radius: 50px;
                background: #000;
                z-index: 2500;
            }

            #top_camera{
                position: absolute;
                top: 15px;
                left: 17px;
                width: 25px;
                height: 25px;
                flex-shrink: 0;
                fill: #FFF;
                z-index: 2500;
            }

            #time{
                position: absolute;
                width: 192px;
                height: 29px;
                flex-shrink: 0;
                color: #FFF;
                text-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);
                font-family: "S-CoreDream-3Light";
                font-size: 30px;
                font-style: normal;
                font-weight: 900;
                line-height: normal;
                letter-spacing: 3.5px; /* 글자 간격을 2px로 설정 */
                left:34px;
                top:15px;
                z-index: 5000;
            }

            #bottom_bar{
                position: absolute;
                top:1194.89px;
                left: 50%;
                transform: translateX(-50%);
                width: 250px;
                height: 15px;
                flex-shrink: 0;
                border-radius: 50px;
                background: rgba(0, 0, 0, 0.28);
                background-color: #00000070;
                z-index: 5000;
            }

            #text{
                top:206.89px;
                left: 50%;
                transform: translateX(-50%);
                position: absolute;
                width: 368px;
                color: #FFF;
                text-align: center;
                text-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);
                font-family: "SB Aggro";
                font-size: 64px;
                font-style: normal;
                font-weight: 400;
                line-height: normal;
                z-index: 3000;
            }

            #main_img{
                top:320.89px;
                left: 50%;
                transform: translateX(-50%);
                position: absolute;
                background: url("img/icon_TD.png") lightgray -578px 0px / 327.381% 100% no-repeat;
                box-shadow: 4px 4px 20px 0px rgba(0, 0, 0, 0.25);
                width: 504px;
                height: 550px;
                flex-shrink: 0;
            }

            #app_bar{
                top:961px;
                left: 50%;
                transform: translateX(-50%);
                position: absolute;
                width: 560px;
                height: 166.33px;
                flex-shrink: 0;
                border-radius: 60px;
                background: rgba(255, 255, 255, 0.29);
                box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.25);
                z-index: 3000;
            }

            #app1{
                position: absolute;
                z-index: 4000;
                width: 96px;
                height: 96px;
                top:993.75px;
                left:69.33px;
                flex-shrink: 0;
                border-radius: 30px;
                background: url("img/menu_TD1.png") lightgray 50% / cover no-repeat;
                box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.25);
            }

            #app2{
                position: absolute;
                z-index: 4000;
                width: 96px;
                height: 96px;
                flex-shrink: 0;
                top:993.75px;
                left:202.33px;
                border-radius: 30px;
                background: url("img/menu_TD2.png") lightgray 50% / cover no-repeat;
                box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.25);
            }

            #app3{
                position: absolute;
                z-index: 4000;
                width: 96px;
                height: 96px;
                flex-shrink: 0;
                top:993.75px;
                left:335.33px;
                border-radius: 30px;
                background: url("img/menu_TD3.jpg") lightgray 50% / cover no-repeat;
                box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.25);
            }

            #app4{
                position: absolute;
                z-index: 4000;
                width: 96px;
                height: 96px;
                flex-shrink: 0;
                top:993.75px;
                left:468.33px;
                border-radius: 30px;
                background: url("img/menu_TD4.jpg") lightgray 50% / cover no-repeat;
                box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.25);
            }
            
            @keyframes slideUp {
                from {
                    transform: translate(-50%, 0);
                }
                to {
                    transform: translate(-50%, -200%);
                }
            }
            
            .bottom-bar-active {
                animation: slideUp 0.5s ease-in-out forwards;
            }
            
        </style>
    </head>

    <body>
        <div class="container">

            <div id="index_box">
                <div id="background_window">
                    <div id="background_img_NY"></div>
                    <div id="time"></div>

                    <div id="navi">
                        <div id="text">Teddy</div>
                        <div id="main_img"></div>
                    </div>

                    <div id="app">
                        <div id="app_bar"></div>
                        <div id="app1"></div>
                        <div id="app2"></div>
                        <div id="app3"></div>
                        <div id="app4"></div>
                    </div>
                </div>

                <div id="top_bar">
                    <img id="top_camera" src="img/top_camera.png">
                </div>
                <div id="bottom_bar"></div>
            </div>


            <iframe id = "song" width="0" height="0" src="https://www.youtube.com/embed/MJM2e-IotSE?autoplay=1&mute=0&controls=0&loop=1&playlist=MJM2e-IotSE&si=iRmPLKTf9SKSjMHs" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>    
        </body>

    <script>
        /*window*/
        function adjustScale() {
            let container = document.querySelector('.container');
            let width = window.innerWidth;
            let height = window.innerHeight;
    
            let scale = 1;
    
            if (height > 1000) {
                scale = width / 760;
            } else {
                scale = height / 1600;
            }
    
            container.style.transform = `scale(${scale})`;
            container.style.transformOrigin = 'center center';
        }
    
        window.addEventListener('resize', adjustScale);
        adjustScale();
    
        /*time*/
        function updateTime() {
            const timeElement = document.querySelector('#time');
            if (!timeElement) return;
    
            const now = new Date();
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
    
            timeElement.textContent = `${hours}:${minutes}`;
        }
    
        setInterval(updateTime, 1000); // 1초마다 업데이트
        updateTime(); // 페이지 로드 시 즉시 실행


        // 애플리케이션 아이콘 목록
        const appIcons = ["app1", "app2", "app3", "app4"];

        // 각 아이콘에 이벤트 추가
        appIcons.forEach((id) => {
            let app = document.getElementById(id);
            
            // 마우스를 올리면 확대
            app.addEventListener("mouseenter", () => {
                app.style.transition = "transform 0.2s ease-in-out";
                app.style.transform = "scale(1.1)";
            });

            // 마우스를 내리면 원래 크기로 복귀
            app.addEventListener("mouseleave", () => {
                app.style.transform = "scale(1)";
            });

            // 클릭 시 페이지 이동
            app.addEventListener("click", () => {
                window.location.href = "amoeba.html";
            });
        });
        
    
        // YouTube API 로드
        let tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        document.body.appendChild(tag);
        

        const bottomBar = document.getElementById("bottom_bar");
        let startY = 0;
        let isDragging = false;

        bottomBar.addEventListener("mousedown", (event) => {
            isDragging = true;
            startY = event.clientY;
        });

        window.addEventListener("mousemove", (event) => {
            if (!isDragging) return;
            let diff = startY - event.clientY;
            if (diff > 10) { // 50px 이상 위로 이동하면 실행
                triggerSlideUp();
                isDragging = false; // 실행 후 드래그 종료
            }
        });

        window.addEventListener("mouseup", () => {
            isDragging = false;
        });

        bottomBar.addEventListener("touchstart", (event) => {
            isDragging = true;
            startY = event.touches[0].clientY;
        });

        bottomBar.addEventListener("touchmove", (event) => {
            if (!isDragging) return;
            let diff = startY - event.touches[0].clientY;
            if (diff > 10) { // 터치 시 50px 이상 움직이면 실행
                triggerSlideUp();
                isDragging = false;
            }
        });

        bottomBar.addEventListener("touchend", () => {
            isDragging = false;
        });

        function triggerSlideUp() {
            bottomBar.classList.add("bottom-bar-active");

            // 애니메이션이 끝난 후 페이지 이동
            setTimeout(() => {
                window.location.href = "amoeba.html";
            }, 350); // 애니메이션 지속 시간과 맞춰야 함
        }
    </script>

</html>
