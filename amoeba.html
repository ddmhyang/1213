<!DOCTYPE html>
<html>
    <head>
        <style>
            @font-face {
                font-family: 'SBAggroB';
                src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_2108@1.1/SBAggroB.woff') format('woff');
                font-weight: normal;
                font-style: normal;
            }

            html, body {
                margin: 0;
                padding: 0;
                height: 100%;
                background: #FFEDF6;
                display: flex;
                overflow: hidden;
                justify-content: center;
                align-items: center;
            }

            .container {
                width: 2560px;
                height: 1600px;
                background: #FFEDF6;
                transform-origin: center center;
                transition: width 0.2s, height 0.2s;
                position: relative;
                overflow: hidden;
            }

            html, body, .container {
                transition: background-color 1s ease-in-out;
            }
        
            
            #index_box {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                z-index: 1000;
                width: 672px;
                height: 1261px;
                flex-shrink: 0;
                border-radius: 50px;
                background: #000;
                border-radius: 50px;
                background: #000;
                box-shadow: 4px 4px 0px 0px rgba(0, 0, 0, 0.49);
            }

            #background_window{
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                width: 634.667px;
                height: 1228.77px;
                flex-shrink: 0;
                border-radius: 40px;
                background-color: #FFF;
                z-index: 2000;
                transition: opacity 1s ease-in-out;
                opacity: 1;
            }

            #background_img_NY, 
            #background_img_TD, 
            #background_img_XM, 
            #background_img_1213 {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                width: 634.667px;
                height: 1228.77px;
                flex-shrink: 0;
                border-radius: 40px;
                z-index: 2000;
                transition: opacity 1s ease-in-out; /* 부드러운 변화 */
                opacity: 0; /* 기본적으로 숨김 */
                border-radius: 40px;
            }

            #background_img_1213 {
                opacity: 1; /* 처음에 보이도록 설정 */
            }


            #background_img_NY{
                background: linear-gradient(0deg, rgba(219, 227, 254, 0.50) 0%, rgba(219, 227, 254, 0.50) 100%), url("img/index_NY.jpg") lightgray 50% / cover no-repeat;
            }

            #background_img_TD{
                background: linear-gradient(0deg, rgba(0, 0, 0, 0.50) 0%, rgba(0, 0, 0, 0.50) 100%), url("img/index_TD.jpg") lightgray -185.256px 0px / 158.379% 100% no-repeat;
            }

            #background_img_XM{
                background: linear-gradient(0deg, rgba(219, 227, 254, 0.50) 0%, rgba(219, 227, 254, 0.50) 100%), url("img/index_XM.png") lightgray -141.654px 0px / 151.52% 100% no-repeat;
            }

            #background_img_1213{
                background: linear-gradient(0deg, rgba(255, 245, 250, 0.50) 0%, rgba(255, 245, 250, 0.50) 100%), url("img/index_1213.png") lightgray 50% / cover no-repeat;            }

            #top_bar{
                position: absolute;
                top: 13.09px;
                left: 50%;
                transform: translateX(-50%);
                width: 326.667px;
                height: 55.395px;
                flex-shrink: 0;
                border-radius: 50px;
                background: #000;
                z-index: 2500;
            }

            #top_camera{
                position: absolute;
                top: 15px;
                left: 17px;
                width: 25px;
                height: 25px;
                flex-shrink: 0;
                fill: #FFF;
                z-index: 2500;
            }

            #time{
                position: absolute;
                width: 575px;
                height: 87px;
                flex-shrink: 0;
                color: #FFF;
                text-align: center;
                text-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);
                font-family: "SBAggroB";
                font-size: 96px;
                font-style: normal;
                font-weight: 200;
                line-height: normal;
                top:193.88px;
                left:50%;
                transform: translateX(-50%);
                z-index: 5000;
            }

            #app_1213{
                position: absolute;
                width: 150px;
                height: 150px;
                flex-shrink: 0;
                border-radius: 30px;
                background: url("img/icon_1213.png") lightgray 50% / cover no-repeat;
                box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.25);
                z-index: 3000;
                top: 440.88px;
                left: 105.33px;
            }

            #app_NY{
                position: absolute;
                width: 150px;
                height: 150px;
                flex-shrink: 0;
                border-radius: 30px;
                background: url("img/icon_NY.png") lightgray 50% / cover no-repeat;
                box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.25);
                z-index: 3000;
                top: 440.88px;
                left: 381.33px;
            }

            #app_TD{
                position: absolute;
                width: 150px;
                height: 150px;
                flex-shrink: 0;
                border-radius: 30px;
                background: url("img/icon_TD.png") lightgray 50% / cover no-repeat;
                box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.25);
                z-index: 3000;
                top: 771.88px;
                left: 105.33px;
            }

            #app_XM{
                position: absolute;
                width: 150px;
                height: 150px;
                flex-shrink: 0;
                border-radius: 30px;
                background: url("img/icon_XM.png") lightgray 50% / cover no-repeat;
                box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.25);
                z-index: 3000;
                top: 771.88px;
                left: 381.33px;
            }
            

            #bottom_bar{
                position: absolute;
                top:1194.89px;
                left: 50%;
                transform: translateX(-50%);
                width: 250px;
                height: 15px;
                flex-shrink: 0;
                border-radius: 50px;
                background: rgba(0, 0, 0, 0.28);
                background-color: #00000070;
                z-index: 5000;
            }

            @keyframes slideUp {
                from {
                    transform: translate(-50%, 0);
                }
                to {
                    transform: translate(-50%, -200%);
                }
            }
            
            .bottom-bar-active {
                animation: slideUp 0.5s ease-in-out forwards;
            }
            
            
        </style>
    </head>

    <body>
        <div class="container">

            <div id="index_box">
                <div id="background_window">
                    <div id="background_img_NY"></div>
                    <div id="background_img_TD"></div>
                    <div id="background_img_XM"></div>
                    <div id="background_img_1213"></div>
                    <div id="time"></div>

                    <div id="app_1213"></div>
                    <div id="app_NY"></div>
                    <div id="app_TD"></div>
                    <div id="app_XM"></div>
                </div>

                <div id="top_bar">
                    <img id="top_camera" src="img/top_camera.png">
                </div>
                <div id="bottom_bar"></div>
            </div>
        </div>

    </body>

    <script>
        /*window*/
        function adjustScale() {
            let container = document.querySelector('.container');
            let width = window.innerWidth;
            let height = window.innerHeight;
    
            let scale = 1;
    
            if (height > 1000) {
                scale = width / 760;
            } else {
                scale = height / 1600;
            }
    
            container.style.transform = `scale(${scale})`;
            container.style.transformOrigin = 'center center';
        }
    
        window.addEventListener('resize', adjustScale);
        adjustScale();
    
        /*time*/
        function updateTime() {
            const timeElement = document.querySelector('#time');
            if (!timeElement) return;
    
            const now = new Date();
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
    
            timeElement.textContent = `${hours}:${minutes}`;
        }
    
        setInterval(updateTime, 1000); // 1초마다 업데이트
        updateTime(); // 페이지 로드 시 즉시 실행

        const apps = [
            document.getElementById("app_1213"),
            document.getElementById("app_NY"),
            document.getElementById("app_TD"),
            document.getElementById("app_XM")
        ];
        
        const backgrounds = [
            document.getElementById("background_img_1213"),
            document.getElementById("background_img_NY"),
            document.getElementById("background_img_TD"),
            document.getElementById("background_img_XM")
        ];
        
        const backgroundColors = ["#FFEDF6", "#ECEFFB", "#DCDCDC", "#D0D3DE"];
        let currentIndex = 0;
        let hoverActive = false;
    
        function changeBackground() {
            if (hoverActive) return; // 마우스 호버 상태에서는 자동 변경 안 함
            let prevIndex = currentIndex;
            currentIndex = (currentIndex + 1) % backgrounds.length;
    
            // 이전 배경 서서히 숨기기
            backgrounds[prevIndex].style.opacity = "0";
    
            setTimeout(() => {
                // 새로운 배경 서서히 보이기
                backgrounds[currentIndex].style.opacity = "1";
            }, 5);
        }
    
        function changeBackgroundColor() {
            if (hoverActive) return; // 마우스 호버 상태에서는 배경색 변경 안 함
            let colorIndex = currentIndex % backgroundColors.length;
            let newColor = backgroundColors[colorIndex];
    
            document.documentElement.style.background = newColor;
            document.body.style.background = newColor;
    
            let container = document.querySelector('.container');
            if (container) {
                container.style.background = newColor;
            }
        }
    
        /* 마우스를 올리면 해당 배경 표시 + 크기 확대 */
        apps.forEach((app, index) => {
            app.addEventListener("mouseenter", () => {
                hoverActive = true; // 자동 변경 중단
                backgrounds.forEach((bg, i) => {
                    bg.style.opacity = i === index ? "1" : "0"; // 해당 배경만 보이기
                });
                app.style.transform = "scale(1.1)"; // 아이콘 확대

                // 🔥 여기에 배경색 변경 추가!
                let newColor = backgroundColors[index];
                document.documentElement.style.background = newColor;
                document.body.style.background = newColor;
                let container = document.querySelector('.container');
                if (container) {
                    container.style.background = newColor;
                }
            });

            app.addEventListener("mouseleave", () => {
                hoverActive = false; // 자동 변경 다시 시작
                app.style.transform = "scale(1)"; // 원래 크기로
            });
        });

    
        // 3초마다 배경 변경 (호버 중이 아닐 때만)
        setInterval(() => {
            changeBackground();
            changeBackgroundColor();
        }, 3000);

        

        const bottomBar = document.getElementById("bottom_bar");
        let startY = 0;
        let isDragging = false;

        bottomBar.addEventListener("mousedown", (event) => {
            isDragging = true;
            startY = event.clientY;
        });

        window.addEventListener("mousemove", (event) => {
            if (!isDragging) return;
            let diff = startY - event.clientY;
            if (diff > 10) { // 50px 이상 위로 이동하면 실행
                triggerSlideUp();
                isDragging = false; // 실행 후 드래그 종료
            }
        });

        window.addEventListener("mouseup", () => {
            isDragging = false;
        });

        bottomBar.addEventListener("touchstart", (event) => {
            isDragging = true;
            startY = event.touches[0].clientY;
        });

        bottomBar.addEventListener("touchmove", (event) => {
            if (!isDragging) return;
            let diff = startY - event.touches[0].clientY;
            if (diff > 10) { // 터치 시 50px 이상 움직이면 실행
                triggerSlideUp();
                isDragging = false;
            }
        });

        bottomBar.addEventListener("touchend", () => {
            isDragging = false;
        });

        function triggerSlideUp() {
            bottomBar.classList.add("bottom-bar-active");

            // 애니메이션이 끝난 후 페이지 이동
            setTimeout(() => {
                window.location.href = "amoeba.html";
            }, 350); // 애니메이션 지속 시간과 맞춰야 함
        }


    </script>

</html>
